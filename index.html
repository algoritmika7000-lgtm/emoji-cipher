<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>‚úß –®–∏—Ñ—Ä —Å –∫–æ–¥–æ–≤—ã–º —Å–ª–æ–≤–æ–º ‚úß</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#f3f0ff,#ffece3);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
}

.container {
    background:white;
    padding:30px;
    border-radius:15px;
    width:800px;
    box-shadow:0 10px 30px rgba(0,0,0,0.1);
}

h2 {
    margin-top:20px;
}

input {
    width:100%;
    padding:10px;
    margin-top:5px;
    margin-bottom:15px;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:14px;
}

button {
    padding:10px 15px;
    border:none;
    border-radius:8px;
    background:#6a5acd;
    color:white;
    cursor:pointer;
    margin-top:5px;
}

button:hover {
    opacity:0.9;
}

.section {
    margin-bottom:30px;
}
</style>
</head>

<body>

<div class="container">

<h1>üîê –®–∏—Ñ—Ä —Å –∫–æ–¥–æ–≤—ã–º —Å–ª–æ–≤–æ–º</h1>

<div class="section">
<h2>–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</h2>
<label>–ö–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ:</label>
<input id="encryptKey">

<label>–°–æ–æ–±—â–µ–Ω–∏–µ:</label>
<input id="encryptInput">

<button onclick="encrypt()">–ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å</button>

<label>–†–µ–∑—É–ª—å—Ç–∞—Ç:</label>
<input id="encryptOutput" readonly>
</div>


<div class="section">
<h2>–î–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</h2>

<label>–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:</label>
<input id="decryptInput">

<button onclick="decrypt()">–î–µ—à–∏—Ñ—Ä–æ–≤–∞—Ç—å</button>

<label>–ö–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ:</label>
<input id="decryptKey" readonly>

<label>–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:</label>
<input id="decryptOutput" readonly>
</div>

</div>

<script>

// ===== –®–ò–§–† =====

const letters = [
"–ê","–ë","–í","–ì","–î","–ï","–Å","–ñ","–ó","–ò","–ô","–ö","–õ","–ú",
"–ù","–û","–ü","–†","–°","–¢","–£","–§","–•","–¶","–ß","–®","–©","–™","–´",
"–¨","–≠","–Æ","–Ø"
];

const smiles = [
":)", ";)", ":D", ":P", ":O", ":|", ":(", ":/", ":||", ":*",
"^_^", "-_-", "o_O", "O_o", "<3", "</3",
"XD", "xD", ":3", ":>", ":<",
"|)", "|(", "||", "|-", "|=:",
":-)", ":-(", ";-)", ":-D", ":-P", ":-O", "))"
];

let encryptMap = {};
let decryptMap = {};

for(let i=0;i<letters.length;i++){
    encryptMap[letters[i]] = smiles[i];
    decryptMap[smiles[i]] = letters[i];
}

// ===== –ö–õ–Æ–ß–ò =====

const keyToCode = {
"–ú–ï–ß":"–ø—Å—Å",
"–ö–ò–†–ö–ê":"–ø–ø—Å—Å—Å",
"–õ–û–ü–ê–¢–ê":"–ø–ø—Å",
"–ú–û–¢–´–ì–ê":"–ø–ø—Å—Å",
"–õ–£–ö":"–ø–ø–ø–Ω–Ω–Ω",
"–©–ò–¢":"–¥–¥–¥–¥–¥–¥—Å",
"–£–î–û–ß–ö–ê":"–ø–ø–ø–Ω–Ω",
"–ù–û–ñ–ù–ò–¶–´":"—Å—Å",
"–í–ï–î–†–û":"—Å—Å—Å",
"–û–ì–ù–ò–í–û":"—Å–∫",
"–ö–û–ú–ü–ê–°":"—Å—Å—Å—Å—Ä",
"–ß–ê–°–´":"–∑–∑–∑–∑—Ä",
"–ê–†–ë–ê–õ–ï–¢":"–ø–ø–ø–Ω–Ω—Å–∫"
};

let codeToKey = {};
for(let key in keyToCode){
    codeToKey[keyToCode[key]] = key;
}

// ===== –§–£–ù–ö–¶–ò–ò =====

function encrypt(){
    let key = document.getElementById("encryptKey").value.toUpperCase();
    let code = keyToCode[key] || "—Å–ø—Å";

    let text = document.getElementById("encryptInput").value.toUpperCase();
    let result = "";

    for(let char of text){
        result += encryptMap[char] || char;
    }

    document.getElementById("encryptOutput").value = code + " " + result;
}

function decrypt(){
    let text = document.getElementById("decryptInput").value;
    let space = text.indexOf(" ");
    if(space === -1) return;

    let code = text.substring(0,space);
    let message = text.substring(space+1);

    document.getElementById("decryptKey").value = codeToKey[code] || "–ü–∏—à–µ—Ç —à–ø–∏–æ–Ω";

    let result = "";
    let i=0;

    while(i < message.length){
        let found=false;
        for(let smile in decryptMap){
            if(message.startsWith(smile,i)){
                result += decryptMap[smile];
                i += smile.length;
                found=true;
                break;
            }
        }
        if(!found){
            result += message[i];
            i++;
        }
    }

    document.getElementById("decryptOutput").value = result;
}

</script>

</body>
</html>
